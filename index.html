<!DOCTYPE html>
<html>
<head>
<title>VC API Use Cases</title>
<meta http-equiv='Content-Type' content='text/html;charset=utf-8' />
<script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
<script src='https://opencreds.github.io/vc-common/common.js' class='remove'></script>
<script class="remove" src="https://cdn.jsdelivr.net/gh/digitalbazaar/respec-mermaid@1.0.1/dist/main.js"></script>
<script src='./refs.js' class='remove'></script>
<script class='remove'>
var respecConfig = {
  // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use .
  specStatus:           "NOTE",
  useExperimentalStyles: true,

  // the specification's short name, as in http://www.w3.org/TR/short-name/
  shortName:            "vc-api-use-cases",

  // if you wish the publication date to be other than today, set this
  // publishDate:  "2019-09-24",

  // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
  // and its maturity status
  //previousPublishDate:  "2017-05-01",
  //previousMaturity:     "CG-FINAL",

  // extend the bibliography entries
  localBiblio: opencreds.localBiblio,

  github: "https://github.com/w3c-ccg/vc-api-use-cases",
  includePermalinks: false,

  // if there a publicly available Editor's Draft, this is the link
  //edDraftURI: "https://opencreds.github.io/vc-api-use-cases/",

  // if this is a LCWD, uncomment and set the end of its review period
  // lcEnd: "2009-08-05",

  // if you want to have extra CSS, append them to this list
  // it is recommended that the respec.css stylesheet be kept
  //extraCSS:             [],

  // editors, add as many as you like
  // only "name" is required
  editors:  [
    { name: "Juan Caballero", 
      company: "Spherity", companyURL: "https://spherity.com/"},
    { name: "Joe Andrieu", 
      company: "Legendary Requirements", companyURL: "http://legreq.com" },
    { name: "Eric Schuh", 
      company: "Legendary Requirements", companyURL: "http://legreq.com" },
  ],

  // authors, add as many as you like.
  // This is optional, uncomment if you have authors as well as editors.
  // only "name" is required. Same format as editors.

  authors:  [

  ],

  // maximum level of table of contents
  maxTocLevel: 3,

  // name of the WG
  wg:           "VC API Working Group",

  // URI of the public WG page
  wgURI:        "TODO: get wg url",

  // name (with the @w3c.org) of the public mailing to which comments are due
  // wgPublicList: "public-vc-comments",

  // URI of the patent status for this WG, for Rec-track documents
  // !!!! IMPORTANT !!!!
  // This is important for Rec-track documents, do not copy a patent URI from a random
  // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
  // Team Contact.
  wgPatentURI:  "https://www.w3.org/2004/01/pp-impl/98922/status",
  // This is for the mermaid rendering
  preProcess: [window.respecMermaid.createFigures]
};
</script>

<style>
dl {
    margin-top: 20px;
    margin-bottom: 20px;
}
dt,
dd {
    line-height: 1.42857143;
}
dl.dl-horizontal > dt {
    font-weight: bold;
}
dl.dl-horizontal > dd {
    padding-bottom: 10px;
}
@media (min-width: 768px), print {
    .dl-horizontal {
        margin-bottom: 2em;
    }
    .dl-horizontal dt {
        font-weight: normal;
        float: left;
        width: 160px;
        clear: left;
        overflow: hidden;
        text-align: right;
    }
    .dl-horizontal dd {
        margin-left: 180px;
    }
    .dl-horizontal dd > ul {
        padding-left: 20px;
        margin: 0px;
    }
    .dl-horizontal dd + dt { border-top: solid thin grey; }
    dl.dl-horizontal dt:not(:first-child) + dd { border-top: solid thin grey; }

    .left.dl-horizontal dt {
        text-align: left;
    }
}
.dl-horizontal dd + dd { border-top: dotted thin grey;
    padding-top: 0.5em; }
</style>

</head>

<body>
  <section id='abstract'>
    <p>
      TODO: write a real abstract
    </p>
  </section>

  <section id='sotd'>
    <p>
This document represents a concise but limited collection of use cases readers
should review alongside the <a href="https://github.com/w3c-ccg/vc-api">VC API Specification</a>.
    </p>
    <p>
Comments regarding this document are welcome. Please file directly on
<a href="https://github.com/w3c-ccg/vc-api-use-cases/issues">GitHub</a>, or send them
to <a href="mailto:public-vc-comments@w3.org">public-vc-comments@w3.org</a>
(<a href="mailto:public-vc-comments-request@w3.org?subject=subscribe">subscribe</a>,
<a href="https://lists.w3.org/Archives/Public/public-vc-api-comments/">archives</a>).
    </p>
  </section>

  <section>
    <!-- Editor - @eric-schuh -->
    <h2>Introduction</h2>
      <p>
        For Verifiable Credentials to be realized as a usable data format there needs to exist a neutral, 
        standard-governed way for Issuers, Holders and Verifiers of these credentials to transport them between said entities.
        TODO: Finish introduction
    </p>
    <section>
      <h3>Existing Work</h3>
      <p>
        TODO: fill in
      </p>
    </section>
  </section>

  <section>
    <h2>Use Cases</h2>
    <p>New cases to be aggregated here, from VC and DID Use Case documents.
    </p>
  </section>
<section>
  <h2>Requirements</h2>

</section>
<section>
  <h2>Features and Benefits</h2>
</section>
<section>
  <!-- Editor - @eric-schuh -->
  <h2>VC API Actions</h2>
    <section>
      <h3>Issuer to Holder</h3>
    </section>
    <section>
      <h3>Present for Verification</h3>
    </section>
    <section>
      <h3>Refresh</h3>
    </section>
</section>
<section>
  <!-- Editor - @eric-schuh -->
  <h2>Focal Use Cases</h2>
  <section>
    <h3>Get Digital Permanent Resident Card</h3>
    <p>Lana is an IT administrator for the United States Citizenship and Immigration Services (USCIS) 
      Digital Permanent Resident Card (PRC) program. She configures the USCIS website to issue digital 
      Permanent Resident Cards by utilizing industry standard issuer software and setting up the appropriate 
      HTTP API Authorizations between systems. Legal Permanent Residents, upon receiving their physical card 
      in the mail, are given the USCIS website URL, a login account, and PIN code that they may use to manage 
      their account and pick up their digital Permanent Resident Card. When Louis, a Legal Permanent Resident, 
      requests a digital Permanent Resident Card via the USCIS website, he authenticates using his login account 
      and once authenticated, provides a DID associated with his client-side digital wallet against which the 
      website will issue VCs. The USCIS website then connects to the digital card issuing server, which builds 
      the Verifiable Credential Permanent Resident Card using Louis' account data, and then utilizes industry 
      standard HTTP APIs to issue the Permanent Resident Card as a Verifiable Credential. Louis can then use his 
      Digital Permanent Resident Card in online scenarios when he needs to prove his resident status, such as 
      when applying for a job.</p>
      <p><b>Requirements: </b><ul>
          <li>1. Verify DID Authentication Presentation,</li>
          <li>2. API Authorization,</li>
          <li>3. Issue Verifiable Credential,</li>
          <li>X. Website as Consumer</li>
        </ul></p>
      <p><b>Mermaid</b>
        <figure>
          <pre class="diagram mermaid">
            sequenceDiagram
              autonumber
                Lana (Issuer Admin)->>uscis.gov (Issuer App):Configure to properly use Generic Issuer SAAS
                uscis.gov (Issuer App)->>uscis.gov (Issuer App):Process configuration
                uscis.gov (Issuer App)->>Generic Issuer SAAS (Issuer Service):Status check
                Generic Issuer SAAS (Issuer Service)->>Generic Issuer SAAS (Issuer Service):Verify Authorization
                Generic Issuer SAAS (Issuer Service)->>Generic Issuer SAAS (Issuer Service):Check business rules
                Generic Issuer SAAS (Issuer Service)->>uscis.gov (Issuer App):All good
                uscis.gov (Issuer App)->>Lana (Issuer Admin):Configuration complete
                authn.io (Holder Service)->>Louis's Browser (Holder App):Holder-App/registerCredentialHandler
                Louis (Holder)->>Louis's Browser (Holder App):uscis.gov
                Louis's Browser (Holder App)->>uscis.gov (Issuer App):uscis.gov
                uscis.gov (Issuer App)->>Louis's Browser (Holder App):uscis.gov/index.html
                Louis's Browser (Holder App)->>Louis (Holder):uscis.gov/index.html
                Louis (Holder)->>Louis's Browser (Holder App):Click "Get PRC"
                Louis's Browser (Holder App)->>uscis.gov (Issuer App):uscis.gov/getPRC
                uscis.gov (Issuer App)->>Louis's Browser (Holder App):request authentication
                Louis's Browser (Holder App)->>Louis (Holder):request authentication
                Louis (Holder)->>Louis's Browser (Holder App):provide authentication details
                Louis's Browser (Holder App)->>uscis.gov (Issuer App):uscis.gov/authenticate?louiss-details
                uscis.gov (Issuer App)->>uscis.gov (Issuer App):process provided authentication details
                uscis.gov (Issuer App)->>Louis's Browser (Holder App):authentication succuss
                Louis's Browser (Holder App)->>Louis (Holder):authentication succuss
                uscis.gov (Issuer App)->>Louis's Browser (Holder App):Holder-App/requestPresentation
                Louis's Browser (Holder App)->>Louis (Holder):Holder/selectHolderService
                Louis (Holder)->>Louis's Browser (Holder App):holderServiceSelection
                Louis's Browser (Holder App)->>authn.io (Holder Service):HolderService/requestPresentation
                authn.io (Holder Service)->>Louis (Holder):Holder/selectWallet
                Louis (Holder)->>authn.io (Holder Service):walletSelection
                authn.io (Holder Service)->>Louis (Holder):Holder/selectProfile
                Louis (Holder)->>authn.io (Holder Service):profileSelection
                authn.io (Holder Service)->>Louis's Browser (Holder App):HolderApp/requestedPresentation
                Louis's Browser (Holder App)->>uscis.gov (Issuer App):IssuerApp/requestedPresentation
                uscis.gov (Issuer App)->>Generic Issuer SAAS (Issuer Service):IssuerService/credentials/issue?"providedVP"
                Generic Issuer SAAS (Issuer Service)->>uscis.gov (Issuer App):IssuerApp/credentials/issued?"issuedCredentailsWrappedByIssuerApp"
                uscis.gov (Issuer App)->>Louis's Browser (Holder App):HolderApp/newCredential?"issuedCredentialUnwrappedByIssuerApp"
                Louis's Browser (Holder App)->>Louis (Holder):Holder/selectHolderService
                Louis (Holder)->>Louis's Browser (Holder App):holderServiceSelection
                Louis's Browser (Holder App)->>authn.io (Holder Service):HolderService/storeCredentials?"credentials"
                authn.io (Holder Service)->>Louis (Holder):Holder/selectWallet
                Louis (Holder)->>authn.io (Holder Service):walletSelection
                authn.io (Holder Service)->>Louis (Holder):Holder/selectProfile
                Louis (Holder)->>authn.io (Holder Service):profileSelection
                authn.io (Holder Service)->>authn.io (Holder Service):Store credentials
                authn.io (Holder Service)->>Louis's Browser (Holder App):HolderApp/credentialsStored
          </pre>
          <figcaption>UC6.1 Mermaid</figcaption>
        </figure>
        <p><i>Contributed by: </i>Digital Bazaar</p>
        <p><i>Author Email: </i>msporny@digitalbazaar.com</p>
        <p><i>Author Github: </i>msporny</p>
      </p>
  </section>
  <section>
    <h3>Refresh Expired Over Age Token</h3>
    <p>Riley has onboarded into the TruAge digital age verification system, which has provided her 
      with a set of Verifiable Credentials that she stores in her digital wallet. A subset of the 
      Verifiable Credentials that she has received are digitally signed single-use age tokens that 
      only assert that she is above the age of 21 and are marked as "used" by the TruAge system 
      when they are submitted as a part of an age-restricted goods purchase, such as buying a 
      bottle of wine. Eventually, Riley runs out of single use age tokens in her digital wallet. 
      The digital wallet keeps track of which tokens have been used and once all tokens have been 
      consumed, contacts a refresh service endpoint listed in one of the TruAge credentials that 
      provides new over-age tokens. The digital wallet requests a new set of tokens by hitting the 
      HTTP API of this VC-refresh service listed in the “refreshService” array and POSTing the 
      original Verifiable Credential containing the refresh service description. The HTTP API 
      ensures that it has received a valid credential and reissues a set of new digitally signed 
      single-use age tokens in the response.
    </p>
      <p><b>Requirements: </b><ul>
        <li>1. Start Presentation Flow,</li>
        <li>2. Verify Presentation, </li>
        <li>3. Issue Verifiable Credential, </li>
        <li>4. Refresh Credential</li>
        </ul></p>
        <p><b>Mermaid</b>
          <figure>
            <pre class="diagram mermaid">

              sequenceDiagram
                autonumber
                  Riley's Wallet (Holder Service)->>Riley's Wallet (Holder Service):Notice out of Age Tokens
                  Riley's Wallet (Holder Service)->>TruAge Website (Verifier App):truage.com/credentials/refresh?"HolderCallbackURL1"
                  TruAge Website (Verifier App)->>Riley's Wallet (Holder Service):ackRequest
                  TruAge Website (Verifier App)->>Riley's Wallet (Holder Service):HolderCallbackURL1/"Domain&Challenge w/ request for expired VC + TruAgeCallbackURL1"
                  Riley's Wallet (Holder Service)->>TruAge Website (Verifier App):ackResponse
                  Riley's Wallet (Holder Service)->>Riley's Wallet (Holder Service):Generate VP containing Age Verification VC
                  Riley's Wallet (Holder Service)->>Riley's Wallet (Holder Service):Sign generated VP
                  Riley's Wallet (Holder Service)->>TruAge Website (Verifier App):TruAgeCallbackURL1?"AgeVerificationVP + HolderWalletCallback1"
                  TruAge Website (Verifier App)->>Riley's Wallet (Holder Service):ackResponse
                  TruAge Website (Verifier App)->>TruAge Website (Verifier App):Extract contained VC
                  TruAge Website (Verifier App)->>TruAge Website (Verifier App):Check if subject of contained VC is signer of VP
                  TruAge Website (Verifier App)->>Generic Verifier SAAS (Verifier Service):genericverifier.com/presentations/verify?"AgeVerificationVP"
                  Generic Verifier SAAS (Verifier Service)->>TruAge Website (Verifier App):ackRequest
                  Generic Verifier SAAS (Verifier Service)->>Generic Verifier SAAS (Verifier Service):Process provided VP
                  Generic Verifier SAAS (Verifier Service)->>TruAge Website (Verifier App):truage.com/presentations/verified?"VerificationResult"
                  TruAge Website (Verifier App)->>Generic Verifier SAAS (Verifier Service):ackResponse
                  TruAge Website (Verifier App)->>TruAge Website (Verifier App):Evaluate VP verification result
                  TruAge Website (Verifier App)->>Generic Verifier SAAS (Verifier Service):genericverifier.com/credentials/verify?"AgeVerificationVC"
                  Generic Verifier SAAS (Verifier Service)->>TruAge Website (Verifier App):ackRequest
                  Generic Verifier SAAS (Verifier Service)->>Generic Verifier SAAS (Verifier Service):Process provided VC
                  Generic Verifier SAAS (Verifier Service)->>TruAge Website (Verifier App):truage.com/credentials/verified?"VerificationResult"
                  TruAge Website (Verifier App)->>Generic Verifier SAAS (Verifier Service):ackResponse
                  TruAge Website (Verifier App)->>TruAge Website (Verifier App):Evaluate business rules
                  TruAge Website (Verifier App)->>Generic Issuer SAAS (Issuer Service):genericissuer.com/credentials/issue?"AgeVerificationVC"
                  Generic Issuer SAAS (Issuer Service)->>TruAge Website (Verifier App):ackRequest
                  Generic Issuer SAAS (Issuer Service)->>Generic Issuer SAAS (Issuer Service):Generate new Age Tokens
                  Generic Issuer SAAS (Issuer Service)->>TruAge Website (Verifier App):truage.com/credentials/issued?"Container Credential + Age Verification VC + NewSingleUseAgeTokenCredentials"
                  TruAge Website (Verifier App)->>Generic Issuer SAAS (Issuer Service):ackResponse
                  TruAge Website (Verifier App)->>Riley's Wallet (Holder Service):holderWalletCallback2?"NewAgeTokenCredentials"
                  Riley's Wallet (Holder Service)->>TruAge Website (Verifier App):ackRecieve
            </pre>
            <figcaption>UC6.2 Mermaid</figcaption>
          </figure>
        </p>
      <p><i>Contributed by: </i>Digital Bazaar</p>
      <p><i>Author Email: </i>msporny@digitalbazaar.com</p>
      <p><i>Author Github: </i>msporny</p>
  </section>

  <section>
    <h3>Execute Multi-stage Presentation Workflow</h3>
    <p>Description: Ignio, a logistics manager for "Kirk Company", would like to submit all necessary paperwork 
      to send his company's products across international boundaries. These products are considered hazardous 
      chemicals and thus are regulated, requiring extra paperwork to be filed before transportation is approved 
      across boundaries. Some hazardous material shipments are different resulting in different required paperwork, 
      and Ignio wants to automate as much of the process as possible with Shippers, 
      their 3rd Party Logistics company (3PL). There are a set of verifiable credentials that Ignio is willing to 
      share with Customs as well as the transportation company. 
    </p>
    <p>When Kirk starts a shipping workflow, his company's systems initiate the workflow by contacting a known 
      location on the Shipper's Website. A presentation exchange occurs to first DIDAuth the company and send 
      generic mandatory information for any shipment; if and only if the information provided requires additional 
      information‒in this case a hazmat certification‒a second exchange is initiated to request this outstanding/required 
      hazmat info.  Once this is received, Shippers can send back a Bill of Lading in VC form. The two (or more) 
      credential exchanges are composable and idempotent, ending in a valid BoL if successful.
    </p>
      <p><b>Requirements: </b><ul>
        <li>1. Verify DID Authentication Presentation, </li>
        <li>2. API Authorization, </li>
        <li>3. Issue Verifiable Credential, </li>
        <li>X. Website as Consumer, </li>
        <li>X. continuous workflow</li>
        </ul></p>
        <p><b>Mermaid</b>
          <figure>
            <pre class="diagram mermaid">
              sequenceDiagram
                autonumber
              Ignio (Logistic Manager)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Verify all necessary info ready to ship
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Ignio (Logistic Manager):Display requested data
              Ignio (Logistic Manager)->>Ignio (Logistic Manager):Evaluate data
              Ignio (Logistic Manager)->>Ignio (Logistic Manager):Decide ready to ship
              Ignio (Logistic Manager)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Trigger shipment
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Shipping Co. Website (Issuer App):shippingco.com/createShipment?"KirkCallbackURL"
              Shipping Co. Website (Issuer App)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Ack Request
              Shipping Co. Website (Issuer App)->>Shipping Co. Website (Issuer App):Evaluate business rules
              Shipping Co. Website (Issuer App)->>Shipping Co. Website (Issuer App):Generate nonce for VP Challenge
              Shipping Co. Website (Issuer App)->>Shipping Co. Website (Issuer App):Generate VP Request
              Shipping Co. Website (Issuer App)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):KirkCallbackURL?"Domain&Challenge + Shipping Info + ShippingCoCallbackURL1"
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Shipping Co. Website (Issuer App):Ack Request
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Evaluate Business Rules for requested Shipping Info
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Generate challenge response VP which contains requested Shipping Info VCs
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Shipping Co. Website (Issuer App):ShippingCoCallbackURL1?"ChallengeResponseVP + KirkCallbackURL2"
              Shipping Co. Website (Issuer App)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Ack Response
              Shipping Co. Website (Issuer App)->>Generic Verifier SAAS (Verifier Service):genericverifier.com/presentations/verify?"ChallengeResponseVP"
              Generic Verifier SAAS (Verifier Service)->>Shipping Co. Website (Issuer App):ackRequest
              Generic Verifier SAAS (Verifier Service)->>Generic Verifier SAAS (Verifier Service):Evaluate Challenge Response
              Generic Verifier SAAS (Verifier Service)->>Shipping Co. Website (Issuer App):shippinco.com/presentations/verified?"VerificationResultVP"
              Shipping Co. Website (Issuer App)->>Generic Verifier SAAS (Verifier Service):ackResponse
              Shipping Co. Website (Issuer App)->>Shipping Co. Website (Issuer App):Evaluate business rules
              Shipping Co. Website (Issuer App)->>Shipping Co Database:Register Shiptment info
              Shipping Co Database->>Shipping Co. Website (Issuer App):info registered
              Shipping Co. Website (Issuer App)->>Shipping Co. Website (Issuer App):Generate nonce for VP Challenge
              Shipping Co. Website (Issuer App)->>Shipping Co. Website (Issuer App):Generate VP Request
              Shipping Co. Website (Issuer App)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):KirkCallbackURL2?"Request for DID Atuh + Hazmat Info + ShippingCoCallbackURL2"
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Shipping Co. Website (Issuer App):Ack Request
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Evaluate business rules for requested Hazmat Info
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Generate VP containing Hazmat Info
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Shipping Co. Website (Issuer App):ShippingCoCallbackURL2?"HazmatVP + KirkCallbackURL3"
              Shipping Co. Website (Issuer App)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):Ack Response
              Shipping Co. Website (Issuer App)->>Generic Verifier SAAS (Verifier Service):genericverifier.com/presentations/verify?"HazmatVP"
              Generic Verifier SAAS (Verifier Service)->>Shipping Co. Website (Issuer App):ackRequest
              Generic Verifier SAAS (Verifier Service)->>Generic Verifier SAAS (Verifier Service):Evaluate Hazmat VP
              Generic Verifier SAAS (Verifier Service)->>Shipping Co. Website (Issuer App):shippinco.com/presentations/verified?"VerificationResultVP"
              Shipping Co. Website (Issuer App)->>Generic Verifier SAAS (Verifier Service):askResponse
              Shipping Co. Website (Issuer App)->>Shipping Co. Website (Issuer App):Check business rules
              Shipping Co. Website (Issuer App)->>Shipping Co Database:Register Hazmat Info
              Shipping Co Database->>Shipping Co. Website (Issuer App):info registered
              Shipping Co. Website (Issuer App)->>Shipping Co Database:Request Shipment and Hazmat info
              Shipping Co Database->>Shipping Co. Website (Issuer App):requested info
              Shipping Co. Website (Issuer App)->>Shipping Co. Website (Issuer App):Generate BoLRequestVP
              Shipping Co. Website (Issuer App)->>Generic Issuer SAAS (Issuer Service):genericissuer.com/credentials/issue?"BoLRequestVP"
              Generic Issuer SAAS (Issuer Service)->>Shipping Co. Website (Issuer App):ackRequest
              Generic Issuer SAAS (Issuer Service)->>Generic Issuer SAAS (Issuer Service):Check business rules
              Generic Issuer SAAS (Issuer Service)->>Shipping Co. Website (Issuer App):shippingco.com/credentials/issued?"BoL"
              Shipping Co. Website (Issuer App)->>Generic Issuer SAAS (Issuer Service):ackResponse
              Shipping Co. Website (Issuer App)->>Kirk Company Enterprise Resource Planning App (Holder and Holder Service):KirkCallbackURL3?"BoL"
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Shipping Co. Website (Issuer App):Ack Response
              Kirk Company Enterprise Resource Planning App (Holder and Holder Service)->>Ignio (Logistic Manager):BoL Ready notice
            </pre>
            <figcaption>UC6.3 Mermaid</figcaption>
          </figure>
        </p>
      <p><i>Contributed by: </i>Digital Bazaar</p>
      <p><i>Author Email: </i>msporny@digitalbazaar.com</p>
      <p><i>Author Github: </i>msporny</p>
  </section>

  <section>
    <h3>Aggregated Credential Workflow</h3>
    <p>Kenzie is using digital credentials to apply for a job at as a teacher. 
      Her teaching certification is already in her digital wallet but the school also requires a 
      criminal background check for which Kenzie does not currently have a credential. The process
      of getting the background check can take 24&ndash;48 hours. Kenzie goes to the job application
      website and submits her application; the website responds requesting both her teaching credential
      and a criminal background check credential --issued by some set of known issuers?--

      Some of his credentials are available today, some will need to be provided when they are ready 
      (for example, a criminal background check can take 24-48 hrs to process). He would like these credentials to 
      be presented to the Verifier (service provider) when ready, without having to constantly return to the Verifier 
      (service provider) and deliver them "by hand". He should be able to have them released from his Holder directly 
      as they become available.</p>
      <p><b>Requirements: </b><ul>
        <li>X. Verifiable Presentation by policy, </li>
        <li>X. Automated notifications, </li>
        <li>X. Asynchronous release, </li>
        <li>X. Authorized/pre-consented authorization, </li>
        <li>X. VP formed with future VCs ("stateful VP")</li>
        <li>X. Present Credentials issued by third party?, </li>
        </ul></p>
        <p><b>Mermaid</b>
          <figure>
            <pre class="diagram mermaid">
              sequenceDiagram
                  autonumber
                      Kenzie (Holder)->>jobapplications.com (Verifier App):jobapplications.com/presenations/submit?"application"
                      jobapplications.com (Verifier App)->>jobapplications.com (Verifier App):process application
                      jobapplications.com (Verifier App)->>Kenzie (Holder):Request credentials A and B
                      Kenzie (Holder)->>Kenzie's Wallet (Holder Service):Check for A and B
                      Kenzie's Wallet (Holder Service)->>Kenzie (Holder):Display A, B not found
                      Kenzie (Holder)->>Kenzie's Wallet (Holder Service):Need B
                      Kenzie's Wallet (Holder Service)->>backgroundcheck.com (Issuer App):backgroundcheck.com/index.html
                      backgroundcheck.com (Issuer App)->>Kenzie's Wallet (Holder Service):index.html
                      Kenzie's Wallet (Holder Service)->>backgroundcheck.com (Issuer App):backgroundcheck.com/getBackgroundCheck
                      backgroundcheck.com (Issuer App)->>Kenzie's Wallet (Holder Service):getBackgoundCheck.html
                      Kenzie's Wallet (Holder Service)->>backgroundcheck.com (Issuer App):backgroundcheck.com/getBackgrounCheck/credentials/issue?"RequestedInfo"
                      backgroundcheck.com (Issuer App)->>backgroundcheck.com (Issuer App):evaluate requested info
                      backgroundcheck.com (Issuer App)->>Generic Issuer (Issuer Service):genericissuer.com/credentials/issue?"backgrounCheckCredential+info"
                      Generic Issuer (Issuer Service)->>backgroundcheck.com (Issuer App):issued VC
                      backgroundcheck.com (Issuer App)->>Kenzie's Wallet (Holder Service):kenzieswallet.com/credentials/recieve?"VC"
                      Kenzie's Wallet (Holder Service)->>Kenzie (Holder):Notify B Ready
                      Kenzie (Holder)->>jobapplications.com (Verifier App):jobapplications.com/presenations/submit?"application"
                      jobapplications.com (Verifier App)->>Kenzie (Holder):Request Credentials A and B
                      Kenzie (Holder)->>Kenzie's Wallet (Holder Service):Send A and B to jobapplications.com
                      Kenzie's Wallet (Holder Service)->>jobapplications.com (Verifier App):jobapplications.com/presentations/submit?"application with A and B"
                      jobapplications.com (Verifier App)->>Generic Verifier (Verifier Service):genericVerifer.com/presentations/verify?"applicationwith A and B"
                      Generic Verifier (Verifier Service)->>jobapplications.com (Verifier App):Verification Result
                      jobapplications.com (Verifier App)->>jobapplications.com (Verifier App):process application
                      jobapplications.com (Verifier App)->>Kenzie's Wallet (Holder Service):Application Accepted
                      Kenzie's Wallet (Holder Service)->>Kenzie (Holder):Application Accepted
            </pre>
            <figcaption>UC6.4 Mermaid</figcaption>
          </figure>
        </p>
      <p><i>Contributed by:</i>SecureKey Technologies Inc.</p>
      <p><i>Author Email: </i>mike.varley@securekey.com</p>
      <p><i>Author Github: </i>mavarley</p>
  </section>

  <section>
    <h3>Submit/Sign/Verify a test credential to a licensure system</h3>
    <p>A student, Shabazz, wants to publish their MBLEx test results from an education test provider, 
      Massage Therapy Test Corp. Massage Therapy Test Corp proxies their authority to sign to a service provider, 
      SSI Ventures.  SSI Ventures issues Shabazz a VC when he logs into his Massage Therapy Test Corp account 
      and enables his browser-based SSI Wallet, Billfold.  The signed VC is then stored in Shabazz’ Billfold™ Wallet 
      to be presented elsewhere.
    </p>
    <p>In a separate session, Shabazz logs into a web portal of a State Massage Therapy licensure system to 
      apply for his Massage Therapy license. The licensure specialist at the State checks the issuer using a 
      State accreditation system, then checks the signature on the test results VC and ingests the 
      credential’s payload. The licensure specialist then finalizes their workflow and issues 
      Shabazz a Massage Therapy license.
    </p>
     <p><b>Requirements: </b></li>
        <li>1. VC Issuance</li>
        <li>2. VC Presentation</li>
        <li><i> 3. Issuer Lookup (is that business logic?),</i></li>
        <li>4. VP Verification</li>
        <li>5. VC Verification</li>
        <li>X. Website as Consumer.</li>
        <li>X. Issuance-as-a-Service, </li>
       </ul></p>
      <p><b>Mermaid</b>
        <figure>
          <pre class="diagram mermaid">
            sequenceDiagram
                autonumber
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):massagetherapytestcorp.com
                    Shabazz's Billfold (Holder App - includes browser)->>Massage Therapy Test Corp Webpage (Issuer App):messagetherapytestcorp.com/index.html
                    Massage Therapy Test Corp Webpage (Issuer App)->>Shabazz's Billfold (Holder App - includes browser):index.html
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):display webpage
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):Authenticate
                    Shabazz's Billfold (Holder App - includes browser)->>Massage Therapy Test Corp Webpage (Issuer App):messagetherapytestcorp.com/authenticate
                    Massage Therapy Test Corp Webpage (Issuer App)->>Shabazz's Billfold (Holder App - includes browser):authentication challenge
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):challenge
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):authentication information
                    Shabazz's Billfold (Holder App - includes browser)->>Massage Therapy Test Corp Webpage (Issuer App):messagetherapytestcorp.com/authenticate?"info"
                    Massage Therapy Test Corp Webpage (Issuer App)->>Massage Therapy Test Corp Webpage (Issuer App):process authentication information
                    Massage Therapy Test Corp Webpage (Issuer App)->>Shabazz's Billfold (Holder App - includes browser):authentication success
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):authentication success
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):get Message Therapy Credential
                    Shabazz's Billfold (Holder App - includes browser)->>Massage Therapy Test Corp Webpage (Issuer App):messagetherapytestcorp.com/getTherapyCredential
                    Massage Therapy Test Corp Webpage (Issuer App)->>Shabazz's Billfold (Holder App - includes browser):DID Auth Challenge
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):Display wallet selector
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):Selected Wallet
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):Display profile selector
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):Selected Profile
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz's Wallet (Holder Service):Request DID Auth Challenge Responsew
                    Shabazz's Wallet (Holder Service)->>Shabazz's Wallet (Holder Service):generate DID Auth response
                    Shabazz's Wallet (Holder Service)->>Shabazz's Billfold (Holder App - includes browser):DID Auth response
                    Shabazz's Billfold (Holder App - includes browser)->>Massage Therapy Test Corp Webpage (Issuer App):messagetherapytestcorp.com/getTherapyCredential/didAuth?"DIDAuthResponse"
                    Massage Therapy Test Corp Webpage (Issuer App)->>Massage Therapy Test Corp Webpage (Issuer App):Process response
                    Massage Therapy Test Corp Webpage (Issuer App)->>SSI Venture (Issuer Service):ssiventures.com/messagetestcorp/credentials/issue?"VPfromDIDAuth"
                    SSI Venture (Issuer Service)->>Massage Therapy Test Corp Webpage (Issuer App):messagetherapytestcorp.com/credentials/issued?"issuedCredentailsWrappedByIssuerApp"
                    Massage Therapy Test Corp Webpage (Issuer App)->>Shabazz's Billfold (Holder App - includes browser):HolderApp/newCredential?"issuedCredentialUnwrappedByIssuerApp"
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz's Wallet (Holder Service):store credential
                    Shabazz's Wallet (Holder Service)->>Shabazz's Billfold (Holder App - includes browser):success
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):Credential successfully stored in wallet
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):Go to Floyd's Message Therapy Webpage
                    Shabazz's Billfold (Holder App - includes browser)->>floydsmassagetheray.com (Verifier App):floydsmessagetherapy.com/index.html
                    floydsmassagetheray.com (Verifier App)->>Shabazz's Billfold (Holder App - includes browser):index.html
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):display page
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):Submit employment application
                    Shabazz's Billfold (Holder App - includes browser)->>floydsmassagetheray.com (Verifier App):floydsmessagetherapy.com/employmentApp
                    floydsmassagetheray.com (Verifier App)->>Shabazz's Billfold (Holder App - includes browser):Domain&Challenge
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):Display wallet selector
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):wallet selection
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):Display profile selector
                    Shabazz (Holder)->>Shabazz's Billfold (Holder App - includes browser):Selected Profile
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz's Wallet (Holder Service):Domain&Challenge
                    Shabazz's Wallet (Holder Service)->>Shabazz's Wallet (Holder Service):generate VP
                    Shabazz's Wallet (Holder Service)->>Shabazz's Billfold (Holder App - includes browser):Challenge response VP
                    Shabazz's Billfold (Holder App - includes browser)->>floydsmassagetheray.com (Verifier App):floydsmessagetherapy.com/empoymentApp/challengeResponse?"VP"
                    floydsmassagetheray.com (Verifier App)->>floydsmassagetheray.com (Verifier App):Process response
                    floydsmassagetheray.com (Verifier App)->>Shabazz's Billfold (Holder App - includes browser):request application with State License VC
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz's Wallet (Holder Service):Request VP
                    Shabazz's Wallet (Holder Service)->>Shabazz's Wallet (Holder Service):Generate VP
                    Shabazz's Wallet (Holder Service)->>Shabazz's Billfold (Holder App - includes browser):VP w/Application and State License
                    Shabazz's Billfold (Holder App - includes browser)->>floydsmassagetheray.com (Verifier App):floydsmessagetherapy.com/presenatations/submit?"Application wtih State License VP"
                    floydsmassagetheray.com (Verifier App)->>State Verifier (Verifier Service):stateverifier.com/credentials/verify?"StateLicenseVC"
                    State Verifier (Verifier Service)->>floydsmassagetheray.com (Verifier App):Verification Result
                    floydsmassagetheray.com (Verifier App)->>floydsmassagetheray.com (Verifier App):process application
                    floydsmassagetheray.com (Verifier App)->>Shabazz's Billfold (Holder App - includes browser):Application submitted
                    Shabazz's Billfold (Holder App - includes browser)->>Shabazz (Holder):Application submitted
          </pre>
          <figcaption>UC6.5 Mermaid</figcaption>
        </figure>
      </p>
     <p><i>Contributed by:</i>RANDA Solutions</p>
     <p><i>Author Email: </i>marty.reed@randasolutions.com</p>
     <p><i>Author Github: </i>martyr160</p>
  </section>

  <section>
    <h3>Supply Chain Import</h3>
    <p>In order to export steel products to the global market, Steel Mills Global must prove 
      the quality of their products. For this, they rely on Inspectors & Co, an internationally 
      recognized steel testing company. Upon inspection, Inspectors & Co issues a 
      Mill Test Report VC to Steel Mills Global.</p>
    <p>Steel Inc. imports and distributes steel products domestically. Negotiating a shipment 
      Steel Mills Global presents the MTR as proof of product quality. Steel Inc. verifies the
      MTR VP and accepts the shipment. </p>
    <p>Steel Inc. initiates the importing procedures, starting out self-issuing an 
      Import Declaration Form VC. The MTR and IDF are jointly presented to the Customs 
      authority which verifies the VP. Upon verification the customs release is granted for goods import. </p>
      </p>
    <p><i>Note: These VC types are taken from the <a class="self-link" aria-label="§" href="">Traceability Vocabulary</a>, a W3C-CCG work item for supply chain use-cases.</i></p>
      <p><b>Requirements:</b><ul>
        <li>1. VC Issuance,</li>
        <li><i>X. Self-Issuance,</i></li>
        <li>X. Re-Presentation and VC+VP Verification across a common supply chain process.</li>
        </ul></p>
      <p><b>Mermaid</b>
        <figure>
          <pre class="diagram mermaid">
            sequenceDiagram
                 autonumber
                    Holder - Steel Mills Global (SMG)->>Holder App -  SMG Enterprise API:getMillTestReportVC     
                    Holder App -  SMG Enterprise API->>Issuer App - Inspectors & Co Enterprise Software:inspectorandco.com/credentials/issue     
                    Issuer App - Inspectors & Co Enterprise Software->>Lacy - Inspectors & Co Inspector:New inspection requested     
                    Lacy - Inspectors & Co Inspector->>Lacy - Inspectors & Co Inspector:Completes SMG Inspection     
                    Lacy - Inspectors & Co Inspector->>Issuer App - Inspectors & Co Enterprise Software:Issue Mill Test Report to SMG     
                    Issuer App - Inspectors & Co Enterprise Software->>Issuer Service - Inspectors & Co Issuer:IandCoIssuer.com/credentials/issue     
                    Issuer Service - Inspectors & Co Issuer->>Issuer Service - Inspectors & Co Issuer:Process request     
                    Issuer Service - Inspectors & Co Issuer->>Issuer App - Inspectors & Co Enterprise Software:Issued Credentials     
                    Issuer App - Inspectors & Co Enterprise Software->>Holder App -  SMG Enterprise API:smgApi.com/credentials/recieve?\"MillTestReportVP\"     
                    Holder App -  SMG Enterprise API->>Holder App -  SMG Enterprise API:Process returned VP     
                    Holder App -  SMG Enterprise API->>Holder Service - SMG Wallet:smgWallet.com/credentials/store?\"MTRVP\"     
                    Holder Service - SMG Wallet->>Holder Storage - SMG EDV/KMS:smgEdv.com/credentials/store?\"MTRVP\"     
                    Holder Storage - SMG EDV/KMS->>Holder Storage - SMG EDV/KMS:Store credentials     
                    Holder Storage - SMG EDV/KMS->>Holder Service - SMG Wallet:Storage success and access info     
                    Holder Service - SMG Wallet->>Holder App -  SMG Enterprise API:Storage acknowledged     
                    Holder App -  SMG Enterprise API->>Holder - Steel Mills Global (SMG):Mill Test Report recieved     
                    Steel Inc->>Holder - Steel Mills Global (SMG):Purchase Inquiry     
                    Holder - Steel Mills Global (SMG)->>Holder - Steel Mills Global (SMG):Process Inquiry    
                    Holder - Steel Mills Global (SMG)->>Steel Inc:Agree to sell     
                    Steel Inc->>Holder - Steel Mills Global (SMG):Request Mill Test Report     
                    Holder - Steel Mills Global (SMG)->>Holder App -  SMG Enterprise API:sendMillTestReportVC     
                    Holder App -  SMG Enterprise API->>Verifier App - Steel Inc. Business API:steelincapi.com/presentations/available     
                    Verifier App - Steel Inc. Business API->>Holder App -  SMG Enterprise API:Domain&Challenge     
                    Holder App -  SMG Enterprise API->>Holder Service - SMG Wallet:smgWallet.com/presentations/issue?\"Domain&Challenge\"     
                    Holder Service - SMG Wallet->>Holder Service - SMG Wallet:Generate VP containing the MTR     
                    Holder Service - SMG Wallet->>Holder Storage - SMG EDV/KMS:smgEdv.com/credentials/sign?\"GeneratedVP\"     
                    Holder Storage - SMG EDV/KMS->>Holder Storage - SMG EDV/KMS:Sign VP     
                    Holder Storage - SMG EDV/KMS->>Holder Service - SMG Wallet:SignedVP     
                    Holder Service - SMG Wallet->>Holder App -  SMG Enterprise API:SignedVP     
                    Holder App -  SMG Enterprise API->>Verifier App - Steel Inc. Business API:steelincapi.com/presentations/submissions?\"SignedVP\"     
                    Verifier App - Steel Inc. Business API->>Verifier App - Steel Inc. Business API:Check business rules     
                    Verifier App - Steel Inc. Business API->>Verifier Service - Steel Industry Verifier:steelindustryverifier.com/presentations/verify     
                    Verifier Service - Steel Industry Verifier->>Verifier Service - Steel Industry Verifier:Check proofs     
                    Verifier Service - Steel Industry Verifier->>Issuer Service - Inspectors & Co Issuer:IandCoIssuer.com/credentials/revocationList?\"MTRVC\"     
                    Issuer Service - Inspectors & Co Issuer->>Issuer Service - Inspectors & Co Issuer:Check revocation list     
                    Issuer Service - Inspectors & Co Issuer->>Verifier Service - Steel Industry Verifier:revocationStatus=notRevoked     
                    Verifier Service - Steel Industry Verifier->>Verifier App - Steel Inc. Business API:steelincapi.com/presentations/verified?\"MTRVC\"     
                    Verifier App - Steel Inc. Business API->>Verifier App - Steel Inc. Business API:Check business rules     
                    Verifier App - Steel Inc. Business API->>Verifier App - Steel Inc. Business API:Record verification result     
                    Verifier App - Steel Inc. Business API->>Steel Inc:New Verification Result Notification     
                    Verifier App - Steel Inc. Business API->>Holder App -  SMG Enterprise API:steelincapi.com/presentations/verified?\"SignedVP\"     
                    Holder App -  SMG Enterprise API->>Holder - Steel Mills Global (SMG):Mill Test Report Verified 
          </pre>
          <figcaption>UC6.6 Mermaid</figcaption>
        </figure>

      </p>
      <p><i>Contributed by:</i>Transmute Industries</p>
      <p><i>Author Email: </i>nis@transmute.industries</p>
      <p><i>Author Github: </i>nissimsan</p>
  </section>
</section>

  <section class="appendix">
    <!-- Editor - @halindrome -->
    <h2>Terminology</h2>

      <em>This section is non-normative.</em>

      <div data-include="./terms.html"
          data-oninclude="restrictReferences">
      </div>

  </section>

  <section class="informative">
    <h2>Acknowledgements</h2>

    <p>
The editors are thankful to the contributions from the VC API Working Group
    </p>

  </section>


</body>
</html>
